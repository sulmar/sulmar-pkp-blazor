@page "/customers"
@using Domain.Models
@using MudBlazorWebAssemblyApp.Client.Services
@inject ICustomerService Api

<MudText Typo="Typo.h3">Customers</MudText>

@if (customers is null)
{
    <MudProgressCircular Color="Color.Primary" Size="Size.Small" Indeterminate="true" />
}
else
{
    <MudDataGrid Items="@customers">
        <Columns>
            <PropertyColumn Property="x => x.Name" Title="Name" />
            <PropertyColumn Property="x => x.Email" Title="E-mail" />
            <TemplateColumn>
                <CellTemplate>
                    <MudIconButton Size="@Size.Small" Icon="@Icons.Material.Outlined.Edit" 
                        Href="@($"/customers/{context.Item.Id}")" />
                </CellTemplate>
            </TemplateColumn>
        </Columns>
    </MudDataGrid>
}


@code {

    private List<Customer>? customers;

    protected override async Task OnInitializedAsync()
    {
        customers = await Api.GetAllAsync();
    }

}
