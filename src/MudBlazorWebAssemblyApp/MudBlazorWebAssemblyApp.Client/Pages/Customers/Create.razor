@page "/customers/create"
@inject ICustomerService Api
@inject NavigationManager Nav

<EditForm Model="@customer" OnValidSubmit="@OnValidSubmit" FormName="CustomerForm" >

    <FluentValidationValidator />

    <MudGrid>
        <MudItem xs="12" sm="7">
            <MudCard>
                <MudCardContent>
                    <MudTextField Label="Name" @bind-Value="@customer.Name" For="@(() => customer.Name)" />
                    <MudTextField Label="E-mail" @bind-Value="@customer.Email" For="@(() => customer.Email)" />
                    <MudTextField Label="Code" @bind-Value="@customer.Code" For="@(() => customer.Code)" HelperText="Format PkpXXX" />
                </MudCardContent>
                
                <MudCardActions>
                    <MudButton ButtonType="ButtonType.Submit" 
                     Color="Color.Primary" Variant="Variant.Filled">Create</MudButton>

                </MudCardActions>
            
            </MudCard>
        </MudItem>
    </MudGrid>
</EditForm>

@code {

    private Customer customer = new Customer() { Name = "a"};

    private async Task OnValidSubmit(EditContext context)
    {
        Console.WriteLine(customer.Name);

        await Api.AddAsync(customer);

        Nav.NavigateTo("/customers");
    }



}
